if(site.sw)
  script.
    jm_pathToWorker = '#{urlPrefix}/service_worker.js'
    // twbs/bootstrap build/sw.jsより借用
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register(window.jm_pathToWorker)
        .then(registration => {
          console.log("Service Worker: 登録: ", registration)
          registration.onupdatefound = () => {
            console.log(this)
            if (this.installing) {
              this.installing.onstatechange = () => {
                if (this.state === "installed") {
                  console.log("Service Worker: バージョンアップします...")
                  location.reload(true)
                }
              }
            }
          }
        }).catch(err => {
          console.log("Service Worker: 登録時にエラー発生しました: ", err)
        })
    }

script.
  var pathname = "/#{site.url.path}";
  var current_locale = "#{locale}";
  var user_language = window.navigator.language;
  var locales = !{JSON.stringify(site.locales)};
  var permalink = "#{page.meta.permalink.slice(locale.length + 1)}";


//- script(src=`${site.url.path}/assets/jquery.slim.min.js` defer)
script(src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js" defer)
//- script(src=`${site.url.path}/assets/bootstrap.bundle.min.js` defer)
script(src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.bundle.min.js" defer)
script(src=`${site.url.path}/assets/scripts/main.js` defer)

link(href=`${site.url.path}/assets/styles/main.css` rel="stylesheet")
//- link(href=`${site.url.path}/assets/animate.min.css` rel="stylesheet")
link(href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css" rel="stylesheet")
link(href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css" rel="stylesheet")
